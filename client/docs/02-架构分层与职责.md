## 🏗️ 简化架构设计（基于图像）

### 1. 真实架构设计（基于您的描述）

```
┌─────────────────────────────────────────────────────────────┐
│            🎨 UI主线程层 (任何调用方式)                      │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐        │
│  │   Qt GUI     │ │   控制台CLI   │ │   Web应用     │        │  
│  │ 检测到文件→  │ │ 检测到文件→  │ │ 检测到文件→   │        │
│  │ 丢进队列      │ │ 丢进队列      │ │ 丢进队列      │        │
│  └──────────────┘ └──────────────┘ └──────────────┘        │
├─────────────────────────────────────────────────────────────┤
│                � 行级锁队列层                               │
│  • ThreadSafeQueue (只锁入队/出队)                          │
│  • 条件变量机制 (有数据立即唤醒)                             │
│  • UI线程: queue.push(fileInfo) 立即返回                   │
├─────────────────────────────────────────────────────────────┤
│              🧵 通知线程层 (独立线程)                        │
│  • 条件变量唤醒 → 从队列取数据                               │
│  • 给本地服务发通知 (文件路径+文件信息)                      │
│  • 发完通知就完事，不管上传                                  │
├─────────────────────────────────────────────────────────────┤
│             🏢 本地服务层 (独立进程)                         │
│  • 接收通知线程消息                                         │
│  • 将文件加入上传队列                                       │
│  • 后台线程执行真正上传                                     │
│  • 每秒回调进度 (可选显示在UI)                               │
└─────────────────────────────────────────────────────────────┘
```

### 2. 核心交互流程（真实流程）

```mermaid
...（省略，见原文）...
```

### 3. 各组件职责分离（清晰分工）

...（省略，见原文）...
