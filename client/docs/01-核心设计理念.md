# 高性能文件上传客户端架构设计

## 📋 核心设计理念

### 基于您描述的真实架构设计
客户端采用**极简职责分离**的设计理念：

```
UI主线程 (Qt/控制台/任何调用方式)
    ↓ 发现需要上传的文件
把文件信息直接丢进队列 (行级锁，入队即完成)
    ↓
通知线程 (单独线程，条件变量唤醒)
    ↓ 发现队列有数据
给本地服务发通知 (告诉它需要上传文件+文件信息)
    ↓
本地服务接收通知 → 将文件加入上传队列 → 后台上传线程执行
    ↓
上传服务每隔1秒回调进度 → UI显示
```

**🎯 核心设计原则：**
- 🎨 **UI线程极简**：UI只做一件事 - 把文件信息丢进队列就完事
- 🧵 **通知线程独立**：专门的线程维护队列，条件变量唤醒，给本地服务发通知
- 🔒 **行级锁队列**：只锁入队和出队操作，高并发性能
- 📞 **本地服务分离**：通知线程只负责通知，真正上传由本地服务的后台线程处理
- ⏱️ **定时进度回调**：上传服务每秒回调一次进度，UI可选择显示
- 🎯 **职责单一原则**：每个组件只做自己的事，UI不管上传，通知线程不管上传
